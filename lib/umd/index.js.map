{"version":3,"file":"index.js","sources":["router/build-route-context.js","router/action-context.js","router/process-callback.js","route-error-handler/index.js","router/router.js","history/api.js","history/watcher.js","pages/page-router.js","pages/routes-mixin.js","pages/page.js","pages/paged-app.js"],"sourcesContent":["import _ from 'underscore';\r\nimport { betterResult as result } from 'bbmn-utils';\r\n\r\nfunction get(router, opts = {}, key, update){\r\n\t\r\n\tlet value = result(opts, key, { context: router, args:[ router ] });\r\n\tif(value == null) {\r\n\t\tvalue = router.getOption(key, {args: [ router ]});\r\n\t\tif(update)\r\n\t\t\topts[key] = value;\r\n\t}\r\n\treturn value;\t\t\r\n}\r\n\r\n// converts route method arguments to plain object;\r\n// _normalizeRegisterRouteArguments\r\n// { route, rawRoute, callback, name }\r\nexport default function routeArgumentsToObject(router, route, name, callback, opts = {}){\r\n\r\n\tlet context = {};\r\n\r\n\tif(_.isObject(route)){\r\n\t\tcontext = route;\r\n\r\n\t\t//then second argument is probably options;\r\n\t\t_.extend(opts, name);\r\n\r\n\t} else if (_.isFunction(name)) {\r\n\t\t_.extend(context, { route, callback: name, name: _.uniqueId('routerAction') });\r\n\t} else {\r\n\t\t_.extend(context, { route, name, callback });\r\n\t}\r\n\r\n\tlet isRouterHoldsActions = get(router, opts, 'isRouterHoldsActions', true);\r\n\r\n\r\n\t// last chance to get callback from router instance by name\r\n\t// this behavior can be disabled through `isRouterHoldsActions` options\r\n\tif(!_.isFunction(context.callback) && isRouterHoldsActions && _.isFunction(router[context.name])) {\r\n\r\n\t\tcontext.callback = router[context.name];\r\n\r\n\t}\r\n\r\n\t//store original route\r\n\tcontext.rawRoute = context.route;\r\n\r\n\t!context.name && (context.name = _.uniqueId('routerAction'));\r\n\r\n\t//converts route to RegExp pattern\r\n\tif (!_.isRegExp(context.route)) context.route = router._routeToRegExp(context.route);\r\n\r\n\t// by default backbone router wraps every callback with own wrapper\r\n\t// which in turn call actual callback with correct arguments on route\r\n\t// this callback was inlined and can not be overrided, so now its possible\t\r\n\tcontext.callbackWrapper = _.bind(router._processCallback, router, context);\r\n\r\n\treturn context;\r\n}\r\n\r\n\r\n\r\n","import _ from 'underscore';\r\n\r\nexport function createActionContext(router, routeContext, fragment, options = {}) {\r\n\r\n\tlet rawArgs = router._extractParameters(routeContext.route, fragment);\r\n\r\n\tlet result = _.extend({}, routeContext, { fragment, rawArgs }, options, { options });\r\n\r\n\tlet args = rawArgs.slice(0);\r\n\tlet queryString = args.pop();\r\n\r\n\t_.extend(result, { qs: prepareActionQueryString(router, queryString) });\r\n\t_.extend(result, { args: prepareActionArguments(routeContext.rawRoute, args) });\r\n\r\n\tif (result.routeType == null) {\r\n\t\tresult.routeType = 'route';\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction prepareActionQueryString(router, queryString){\r\n\tif(_.isString(queryString))\r\n\t\treturn router.queryStringParser(queryString);\r\n\telse\r\n\t\treturn {};\r\n}\r\n\r\nfunction prepareActionArguments(rawRoute, args){\r\n\r\n\tlet params = rawRoute.match(/:([^/|)]+)/g) || [];\r\n\t\r\n\tlet res = {};\r\n\t_(params).each((name, index) => {\r\n\t\tname = name.substring(1);\r\n\t\t\r\n\t\tif(args == null) return;\r\n\r\n\t\tif(name in res && _.isArray(res[name]))\r\n\t\t\tres[name].push(args[index]);\r\n\t\telse if(name in res && !_.isArray(res[name]))\r\n\t\t\tres[name] = [res[name]].concat(args[index]);\r\n\t\telse\r\n\t\t\tres[name] = args[index];\r\n\t});\r\n\treturn res;\r\n}\r\n","import _ from 'underscore';\r\n\r\nfunction toPromise(arg, resolve = true){\r\n\tif (arg instanceof Promise || (arg && _.isFunction(arg.then)))\r\n\t\treturn arg;\r\n\telse if (arg instanceof Error)\r\n\t\treturn Promise.reject(arg);\r\n\telse\r\n\t\treturn resolve \r\n\t\t\t? Promise.resolve(arg) \r\n\t\t\t: Promise.reject(arg);\r\n}\r\n\r\n\r\nfunction getCallbackFunction(callback, executeResult)\r\n{\r\n\treturn (...args) => {\r\n\t\ttry {\r\n\t\t\texecuteResult.value = callback && callback(...args);\r\n\t\t} catch(exception) {\r\n\t\t\texecuteResult.value = exception;\r\n\t\t}\r\n\t\texecuteResult.promise = toPromise(executeResult.value);\r\n\t\treturn executeResult.value;\r\n\t};\r\n}\r\n\r\n\r\nexport function processCallback(router, actionContext, routeType){\t\r\n\t\r\n\tlet args = router.getOption('classicMode') \r\n\t\t? actionContext.rawArgs || [] \r\n\t\t: [ actionContext ];\r\n\r\n\tlet asPromise = router.getOption('callbackAsPromises');\r\n\tlet executeResult = {};\r\n\tlet callback = getCallbackFunction(actionContext.callback, executeResult, asPromise);\r\n\r\n\r\n\t\r\n\trouter.triggerEvent('before:' + routeType, actionContext);\r\n\r\n\tlet shouldTriggerEvent = router.execute(callback, args);\r\n\tif (shouldTriggerEvent !== false) {\r\n\t\trouter.triggerEvent(routeType, actionContext);\r\n\t\tif(routeType == 'route' || routeType == 'backroute')\r\n\t\t\trouter.lastAttempt = actionContext;\r\n\t}\r\n\r\n\texecuteResult.promise.then(\r\n\t\t(arg) => {\r\n\t\t\trouter.triggerEvent('after:'+routeType, actionContext);\r\n\t\t\treturn arg;\r\n\t\t},\r\n\t\t(error) => {\r\n\t\t\trouter.triggerEvent('error:' + routeType, error, actionContext);\r\n\t\t\trouter.handleError(error, actionContext);\r\n\t\t}\r\n\t);\r\n\r\n\treturn executeResult.value;\r\n}\r\n\r\n\r\n\r\n","import _ from 'underscore';\r\nimport $ from 'jquery';\r\n//import $ from 'jquery';\r\n\r\nexport default {\r\n\thandlers: {\r\n\t\t'js:error'(error){\r\n\t\t\tthrow error;\r\n\t\t},\r\n\t},\r\n\thandle(error, context, args){\r\n\r\n\t\tlet handlers = this._getHandleContext(error, context, args) || {};\r\n\t\treturn _(handlers).some((options, key) => this.applyHandler(key, options));\r\n\r\n\t},\r\n\tapplyHandler(key, options = {}){\r\n\r\n\t\tlet handler = this.getHandler(key, options);\r\n\t\tif (!handler) return;\r\n\t\tlet { context, args } = options;\r\n\t\treturn handler.apply(context, args);\r\n\r\n\t},\r\n\tgetHandler(key){\r\n\t\tif(_.isFunction(this.handlers[key]))\r\n\t\t\treturn this.handlers[key];\r\n\t},\r\n\tsetHandler(key, handler){\r\n\t\tif(!_.isString(key) || key === '')\r\n\t\t\tthrow new Error('setHandler first argument must be a non empty string');\r\n\r\n\t\tif (!_.isFunction(handler)) {\r\n\t\t\tdelete this.handlers[key];\r\n\t\t} else {\r\n\t\t\tthis.handlers[key] = handler;\r\n\t\t}\r\n\t},\r\n\tsetHandlers(hash){\r\n\t\tlet nullable = hash === null;\r\n\t\tlet items = nullable && this.handlers || hash;\r\n\t\tif(!_.isObject(items)) return;\r\n\t\t_(items).each((handler, key) => this.setHandler(key, nullable || handler));\r\n\t},\r\n\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\t_getHandleContext(error, context, args = []){\r\n\r\n\t\tif (_.isArray(error)) {\r\n\t\t\treturn _(error).reduce((memo, item) => _.extend(memo, this._getHandleContext(item, context, args)), {});\r\n\t\t}\r\n\r\n\t\tif(_.isFunction(this.getHandleContext)) {\r\n\t\t\tlet custom = this.getHandleContext(error, context, args);\r\n\t\t\tif(custom != null) return custom;\r\n\t\t}\r\n\r\n\t\tif (error instanceof Error) {\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'js:error': { context, args } };\r\n\t\t}\r\n\t\telse if(_.isString(error)) {\r\n\t\t\treturn { [error]: { context, args } };\r\n\t\t}\r\n\t\telse if(error instanceof $.Deferred().constructor){\r\n\t\t\targs.unshift(error);\r\n\t\t\treturn { 'jq:xhr': { context, args }};\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// provide your own arguments processor\r\n\t// should return hash: { 'handler_key': { context: handler_context, args: handler_arguments}}\r\n\tgetHandleContext: undefined,\r\n\r\n};\r\n","import _ from 'underscore';\r\nimport {  getOption, triggerMethod, paramsToObject as paramStringToObject } from 'bbmn-utils';\r\nimport { Router as BbRouter, history } from 'bbmn-core';\r\n\r\n//import paramStringToObject from '../../../utils/params-to-object/index.js';\r\n//import { Backbone, Router as BbRouter } from '../../../vendors/backbone.js';\r\n\r\nimport buildRouteContextFromArguments from './build-route-context.js';\r\n\r\nimport  { createActionContext } from './action-context.js';\r\nimport { processCallback } from './process-callback.js';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\n\r\n\r\nconst Router = BbRouter.extend({\r\n\r\n\r\n\t// for migrating from Mn.AppRoute\r\n\t// set to true. it will populate routes from { controller, appRoutes } structure.\r\n\tisMarionetteStyle: false,\r\n\r\n\t// by default Backbone.Router tries to lookup callback in router instance by name `callback = this[name]` if there is no callback provided\r\n\t// its recomend to turn this feature to false\r\n\t// default value is true for Backbone.Router compatability\r\n\tisRouterHoldsActions : true,\r\n\r\n\t// by default Backbone.Router `route` method returns router itself instead of just created routeContext for chaining purposes.\r\n\t// you can change this behavior turning this feature to false\r\n\tisRouteChaining: true,\r\n\r\n\t//in classic mode actions receive argument array\r\n\t//if you need actionContext instead turn this option to false\r\n\tclassicMode: true,\r\n\r\n\tconstructor(options = {}){\r\n\t\t\r\n\t\tthis.options = _.extend({}, _.result(this, 'options'), options);\r\n\r\n\t\tBbRouter.apply(this, arguments);\r\n\r\n\r\n\t},\r\n\r\n\tgetOption(){\r\n\t\treturn getOption.call(this, ...arguments);\r\n\t},\r\n\ttriggerMethod,\r\n\t/*\r\n\r\n\t\tinitialize methods\r\n\t\t\"when a router initialized\"\r\n\r\n\t*/\r\n\r\n\t//by default router expects that routes will result in { route, callback } hash\r\n\t//we are extending this to provide more flexibility\r\n\t// - overrided\r\n\t_bindRoutes: function() {\r\n\t\t\r\n\t\tlet routes = this.getInitRoutes();\r\n\t\tif(!_.size(routes)) return;\r\n\t\tthis.addRoutes(routes);\r\n\r\n\t},\r\n\tgetInitRoutes(){\r\n\t\tlet routes;\r\n\t\tif(this.getOption('isMarionetteStyle')) {\r\n\t\t\tlet controller = this.getOption('controller') || {};\r\n\t\t\tlet approutes = this.getOption('appRoutes') || {};\r\n\t\t\troutes = _(approutes).map((name, route) => ({ \r\n\t\t\t\troute, name, \r\n\t\t\t\tcallback: controller[name] \r\n\t\t\t}));\r\n\t\t}\r\n\t\telse {\r\n\t\t\troutes = this.getOption('routes');\r\n\t\t}\r\n\t\treturn routes;\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tmanipulating routes\r\n\t\tadding\r\n\t*/\r\n\r\n\t// refactored original route method\r\n\t// chain:true by default is for supporting default behavior\r\n\t// routerHoldsActions: true - backbone router tries to get callback from router itself if there is no callback provided. \r\n\t// this options allow to support this behavior, but its recomended not to hold action inside router instance\r\n\t// - overrided\r\n\troute(route, name, callback, opts = {}){\r\n\t\t\r\n\t\t//normalizing passed arguments and putting them into a context object\r\n\t\t//refactored from original route\r\n\t\t// let context = this._normalizeRegisterRouteArguments(route, name, callback, opts);\r\n\r\n\t\t// //extends context with result of `mergeWithRegisterRouteContext`\r\n\t\t// this._normalizeRegisterRouteContext(context);\r\n\r\n\t\t// //wrapping provided callback \r\n\t\t// this._normalizeRegisterRouteCallback(context);\r\n\r\n\t\tlet context = this._buildRouteContext(route, name, callback, opts);\r\n\r\n\t\t//refactored for providing possibility to override\r\n\t\t//at this point context should be almost ready\r\n\t\tthis.registerRouteContext(context);\r\n\r\n\t\tthis._storeCreatedContext(context, opts);\r\n\r\n\t\treturn opts.isRouteChaining === true \r\n\t\t\t? this \r\n\t\t\t: context;\r\n\r\n\t},\r\n\r\n\t// provide more semantic alias for route\r\n\taddRoute(route, name, callback, opts = {}){\r\n\t\tif(opts.isRouteChaining == null)\r\n\t\t\topts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tlet context = this.route(route, name, callback, opts);\r\n\t\treturn context;\r\n\t},\r\n\r\n\t//process many routes at once\r\n\t//accepts object { name, routeContext | handler }\r\n\t// or array of routeContexts\r\n\taddRoutes(routes, opts = {}){\r\n\r\n\t\tif(opts.isRouteChaining == null)\r\n\t\t\topts.isRouteChaining = this.getOption('isRouteChaining');\r\n\r\n\t\tlet normalized = _(routes)\r\n\t\t\t.chain()\r\n\t\t\t.map((value, key) => this._normalizeRoutes(value, key))\r\n\t\t\t.filter(f => _.isObject(f))\r\n\t\t\t.value();\r\n\r\n\t\tif(opts.doNotReverse != true)\r\n\t\t\tnormalized.reverse();\r\n\r\n\t\tlet registered = _(normalized).map(\r\n\t\t\troute => route && \r\n\t\t\tthis.addRoute(route, _.extend({ massAdd:true }, opts))\r\n\t\t); \r\n\t\t\r\n\t\tif(opts.doNotReverse != true)\r\n\t\t\tregistered.reverse();\r\n\r\n\t\t_(registered).each((c) => this._storeCreatedContext(c));\r\n\t\t\r\n\t\treturn registered;\r\n\t},\r\n\r\n\t// internal method called by `addRoutes` to normalize provided data\r\n\t_normalizeRoutes(value, key){\r\n\t\t//let route, name, callback;\r\n\t\tlet context;\r\n\t\tif (_.isString(value)) {\r\n\t\t\tcontext = { \r\n\t\t\t\troute: key, \r\n\t\t\t\tname: value, \r\n\t\t\t};\r\n\t\t}\r\n\t\telse if(_.isFunction(value)){\r\n\t\t\tcontext = { route:key, callback:value };\r\n\t\t}else if(_.isObject(value)){\r\n\t\t\tcontext = _.clone(value);\r\n\t\t\tif(!_.has(context, 'route'))\r\n\t\t\t\tcontext.route = key;\r\n\t\t\telse if(_.has(context, 'route') && !_.has(context, 'name'))\r\n\t\t\t\tcontext.name = key;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\r\n\r\n\t_buildRouteContext(route, name, callback, opts) {\r\n\r\n\t\tlet context = buildRouteContextFromArguments(this, route, name, callback, opts);\r\n\r\n\t\treturn this.buildRouteContext(context);\r\n\t},\r\n\r\n\t//override this method if you need more information in route context\r\n\t// should return object wich will be merged with default context\r\n\t// be aware of providing reserved properties: route, name, callback\r\n\t// this will override context defaults\r\n\tbuildRouteContext: context => context,\r\n\r\n\r\n\t//finally, putting handler to the backbone.history.handlers\r\n\tregisterRouteContext(context){\r\n\t\thistory.route(context.route, context.callbackWrapper, context);\r\n\t},\r\n\r\n\t//store registered context for further use\r\n\t_storeCreatedContext(context, opts = {}){\r\n\t\tthis.routeContexts || (this.routeContexts = {});\r\n\t\tif(!opts.massAdd)\r\n\t\t\tthis.routeContexts[context.name] = context;\r\n\t\treturn context;\r\n\t},\r\n\r\n\r\n\r\n\t/*\r\n\t\r\n\t\tprocess route methods\t\t\r\n\t\t\"when route happens\"\r\n\r\n\t*/\r\n\r\n\t//inner route handler\r\n\t//preparing actionContext and calls public processCallback\r\n\t_processCallback (routeContext, fragment, options = {}) {\r\n\t\tlet actionContext = createActionContext(this, routeContext, fragment, options);\r\n\t\tactionContext.restart = () => actionContext.callbackWrapper(fragment, options);\r\n\t\tlet result = this.processCallback(actionContext, actionContext.routeType, options);\r\n\t\treturn result;\r\n\t},\r\n\t\r\n\t//by default behave as original router\r\n\t//override this method to process action by your own\r\n\tprocessCallback(actionContext, routeType){\r\n\r\n\t\treturn processCallback(this, actionContext, routeType);\r\n\r\n\t},\r\n\r\n\thandleError(error, action){\t\t\r\n\t\terrorHandler.handle(error, this, [action]);\r\n\t},\r\n\r\n\t//just triggers appropriate events\r\n\t// triggerRouteEvents(context, event, name, ...args) {\r\n\t// \tif (event == 'route') {\r\n\t// \t\tthis.lastActionContext = context;\r\n\t// \t}\r\n\t// \tthis.trigger(`${event}:${name}`, ...args);\r\n\t// \tthis.trigger(event, name, ...args);\r\n\t// \tBackbone.history.trigger(event, this, name, ...args);\r\n\t// },\r\n\r\n\ttriggerEvent(event, context){\r\n\t\tthis.trigger(event, context);\r\n\t\thistory.trigger(event, context);\r\n\t},\r\n\r\n\r\n\r\n\r\n\t//converts string to object\r\n\t//default implementation, can be overriden by user\r\n\tqueryStringParser: paramStringToObject,\t\r\n\r\n\t// navigate(...args){\r\n\t// \thistoryNavigate(...args);\r\n\t// \treturn this;\r\n\t// },\r\n\r\n\t_routeToRegExp(route) {\r\n\r\n\t\tvar optionalParam = /\\((.*?)\\)/g;\r\n\t\tvar namedParam    = /(\\(\\?)?:\\w+/g;\r\n\t\tvar splatParam    = /\\*\\w+/g;\r\n\t\tvar escapeRegExp  = /[-{}[]+?.,\\\\\\^$|#\\s]/g;\r\n\r\n\t\troute = route.replace(escapeRegExp, '\\\\$&')\r\n\t\t\t.replace(optionalParam, '(?:$1)?')\r\n\t\t\t.replace(namedParam, function(match, optional) {\r\n\t\t\t\treturn optional ? match : '([^/?]+)';\r\n\t\t\t})\r\n\t\t\t.replace(splatParam, '([^?]*?)');\r\n\t\tlet flags = this.getOption('routeCaseInsensitive') ? 'i' : '';\r\n\t\treturn new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$', flags);\r\n\t},\r\n\r\n\r\n\t/*\r\n\t\tSome API methods\r\n\t*/\r\n\r\n\tgetContextByFragment(fragment)\t{\r\n\t\tif(!_.isString(fragment)) return;\r\n\t\t//let contexts = this.routeContexts;\r\n\t\t//console.log('Router contexts', contexts);\r\n\t\tlet result = _(this.routeContexts).find((cntx) => cntx.route.test(fragment));\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n});\r\n\r\nexport default Router;\r\n","import _ from 'underscore';\r\nimport { history } from 'bbmn-core';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\nconst historyApi = {\r\n\t// supports passing options to the callback\r\n\t// by using new version of loadUrl\t\r\n\tnavigate(fragment, opts){\r\n\t\r\n\t\tlet options = opts === true ? { trigger: true }\r\n\t\t\t: _.isObject(opts) ? _.clone(opts)\r\n\t\t\t\t: {};\r\n\t\r\n\t\tlet { trigger } = options;\t\r\n\t\tdelete options.trigger;\r\n\t\r\n\t\thistory.navigate(fragment, options);\r\n\t\r\n\t\tif (trigger) {\r\n\t\t\treturn historyApi.loadUrl(fragment, opts);\r\n\t\t}\r\n\t\r\n\t},\r\n\r\n\t// original loadUrl does not pass options to the callback\r\n\t// and this one does\r\n\tloadUrl(fragment, opts = {}) {\r\n\r\n\t\t// If the root doesn't match, no routes can match either.\r\n\t\tif (!history.matchRoot()) return false;\r\n\r\n\t\tfragment = history.fragment = history.getFragment(fragment);\r\n\r\n\t\tlet executed = historyApi.executeHandler(fragment, opts);\r\n\t\tif (!executed) {\r\n\t\t\terrorHandler.handle('not:found', opts.context, [fragment]);\r\n\t\t}\r\n\t\treturn executed;\r\n\t},\r\n\r\n\t// default test handler\r\n\t//TODO: think about constraints check\r\n\ttestHandler(handler, fragment){\r\n\t\treturn handler.route.test(fragment);\r\n\t},\r\n\r\n\t//also accepts test function, if you wish test handlers by your own\r\n\tfindHandler(fragment, customTest){\r\n\t\tlet test = _.isFunction(customTest) ? customTest : historyApi.testHandler;\r\n\t\tfragment = history.getFragment(fragment);\r\n\t\treturn _.filter(history.handlers || [], handler => test(handler, fragment))[0];\r\n\t},\r\n\r\n\texecuteHandler(fragment, opts = {}, resultContext = {}) {\r\n\t\t\r\n\t\tlet handler = historyApi.findHandler(fragment, opts.testHandler);\r\n\t\t\r\n\t\thandler && (resultContext.value = handler.callback(fragment, opts));\r\n\r\n\t\treturn !!handler;\r\n\t},\r\n\t// this start replaces native history loadUrl and test handler\r\n\tstart(options){\r\n\r\n\t\tif(history.loadUrl !== historyApi.loadUrl)\r\n\t\t\thistory.loadUrl = historyApi.loadUrl;\r\n\t\r\n\t\tlet result = history.start(options);\r\n\r\n\t\treturn result;\r\n\t},\r\n\tisStarted(){\r\n\t\treturn !!history.started;\r\n\t}\r\n};\r\n\r\nexport default historyApi;\r\n","import _ from 'underscore';\r\nimport { history, Events }  from 'bbmn-core';\r\nimport historyApi from './api';\r\n\r\n\r\nexport default _.extend({\r\n\twatch(){\r\n\t\tthis.entries = [];\r\n\t\tthis.listenTo(history, 'route', this.onRoute);\r\n\t\tthis.listenTo(history, 'backroute', this.onBackRoute);\r\n\t},\r\n\tisActionContext: cntx => _.isObject(cntx) && _.isString(cntx.fragment),\r\n\thasElements(){\r\n\t\treturn this.entries.length > 0;\r\n\t},\r\n\tonRoute(actionContext){\r\n\r\n\t\tif(!this.isActionContext(actionContext))\r\n\t\t\treturn;\r\n\r\n\t\tif (this.isActionContext(this.lastElement)) {\r\n\t\t\tthis.entries.push(this.lastElement);\r\n\t\t}\r\n\t\tthis.lastElement = actionContext;\r\n\r\n\t},\r\n\tonBackRoute(actionContext){\r\n\t\tif(!this.isActionContext(actionContext) || !this.isActionContext(actionContext.gobackContext))\r\n\t\t\treturn;\r\n\r\n\t\tlet lookFor = actionContext.gobackContext;\r\n\t\tlet index = this.entries.indexOf(lookFor);\r\n\t\tif (index >= 0) {\r\n\t\t\tthis.entries = this.entries.slice(0, index);\r\n\t\t\tthis.lastElement = lookFor;\r\n\t\t}\r\n\r\n\t},\r\n\tgoBack(){\r\n\t\tlet last = this.hasElements() && _(this.entries).last();\r\n\t\thistoryApi.navigate(last.fragment, { trigger: true, routeType: 'backroute', gobackContext: last });\r\n\t},\r\n}, Events);\r\n","import _ from 'underscore';\r\nimport { Process } from 'bbmn-components';\r\nimport BaseRouter from '../router/router.js';\r\nimport errorHandler from '../route-error-handler/index.js';\r\n\r\nexport default BaseRouter.extend({\r\n\t\r\n\tclassicMode:false,\r\n\tisRouterHoldsActions : false,\r\n\tisRouteChaining: false,\t\r\n\tcallbackAsPromises: true,\r\n\trouteCaseInsensitive: true,\r\n\r\n\tregisterPageRoutes(page){\r\n\t\tlet contexts = page.getRoutesContexts({ reverse: true });\r\n\t\t_.each(contexts, context => {\r\n\t\t\tlet callback = (...args) => {\r\n\t\t\t\treturn this.startPage(page, ...args);\r\n\t\t\t};\r\n\t\t\tthis.addRoute(context.route, context.name, callback);\r\n\t\t});\r\n\t},\r\n\r\n\thandleError(process, action){\r\n\t\tlet args, error;\r\n\r\n\t\tif(process instanceof Process) {\r\n\t\t\targs = [].slice.call(process.errors) ;\r\n\t\t\terror = args.shift();\r\n\t\t\targs.push(action);\r\n\t\t} else {\r\n\t\t\terror = process;\r\n\t\t\targs = [action];\r\n\t\t}\r\n\r\n\t\terrorHandler.handle(error, this, args);\r\n\r\n\t},\r\n\tstartPage(page, ...args){\r\n\t\treturn this.beforePageStart(page)\r\n\t\t\t.then(() => page.start(...args))\r\n\t\t\t.then(() => this.afterPageStart(page, ...args));\r\n\t},\r\n\r\n\tbeforePageStart(){\r\n\t\tif (this.previousPage && this.previousPage.isStarted())\r\n\t\t\treturn this.previousPage.stop();\r\n\t\telse\r\n\t\t\treturn Promise.resolve();\r\n\t},\r\n\r\n\tafterPageStart(page){\r\n\t\tthis.previousPage = page;\r\n\t},\r\n\r\n\trestartLastAttempt(){\r\n\t\tif(this.lastAttempt)\r\n\t\t\treturn this.lastAttempt.restart();\r\n\t}\r\n});\r\n","import _ from 'underscore';\r\nimport PageRouter from './page-router.js';\r\nimport { comparator } from 'bbmn-utils';\r\n\r\nexport default {\r\n\tinitializeRoutes(){\r\n\t\tif (this.initializeRouter()) {\r\n\t\t\tthis._buildRoutesContexts();\r\n\t\t}\r\n\t},\r\n\tinitializeRouter(){\t\t\r\n\t\tif(this.getOption('shouldCreateRouter') && !this.router) {\r\n\t\t\tthis.router = this._createRouter();\r\n\t\t\tthis._shouldRegisterAllRoutes = true;\r\n\t\t}\r\n\r\n\t\tif(this.getOption('shouldRegisterAllRoutes')) {\r\n\t\t\tthis._shouldRegisterAllRoutes = true;\r\n\t\t}\r\n\r\n\t\treturn !!this.router;\r\n\t},\r\n\t_createRouter(){\r\n\t\tlet Router = this.getOption('Router') || PageRouter;\r\n\t\tlet options = _.extend({}, this.getOption('routerOptions'));\r\n\t\treturn new Router(options);\r\n\t},\r\n\tregisterAllRoutes(){\r\n\t\tif(!this._shouldRegisterAllRoutes) return;\r\n\r\n\t\tlet pages = this.getAllChildren({ reverse: true, includeSelf: true, force: true });\r\n\t\t\r\n\t\tlet router = this.router;\r\n\t\t_(pages).each(page => router.registerPageRoutes(page));\r\n\t\t\r\n\t},\r\n\t_buildRoutesContexts(){\r\n\t\tlet routes = this.getOption('routes', {args: [this]});\r\n\t\tif (routes == null) return;\r\n\t\tif(_.isString(routes))\r\n\t\t\troutes = [routes];\r\n\r\n\t\tlet result = [];\r\n\t\tlet config = this.getRoutesConfig();\r\n\t\t_(routes).each((route, index) => {\r\n\t\t\tlet context = this._normalizeRoutesContextRoute(route, index, config);\r\n\t\t\t_.isObject(context) && (result.push(context));\r\n\t\t});\r\n\t\tthis.routesContext = result;\r\n\t\treturn this.routesContext;\r\n\t},\r\n\t_normalizeRoutesContextRoute(arg, index, config = {}){\r\n\t\tif(arguments.length < 2){\r\n\t\t\tconfig = this.getRoutesConfig();\r\n\t\t}\r\n\t\tlet context = { page: this };\r\n\t\tif(arg == null)\r\n\t\t\treturn;\r\n\t\tif (_.isString(arg)) {\r\n\t\t\t_.extend(context, {route: arg, rawRoute: arg });\r\n\t\t} else if(_.isFunction(arg)) {\r\n\t\t\targ = arg.call(this, this, index);\r\n\t\t\treturn this._normalizeRoutesContextRoute(arg, index);\r\n\t\t} else {\r\n\t\t\t_.extend(context, arg);\r\n\t\t}\r\n\t\tlet name = (_.isString(index) && index) || context.name || context.route || _.uniqueId('route');\r\n\t\tcontext.name = name;\r\n\r\n\t\tif(_.isNumber(index) && context.order == null)\r\n\t\t\tcontext.order = index;\r\n\r\n\t\tif (!context.rawRoute)\r\n\t\t\tcontext.rawRoute = context.route;\r\n\t\t\t\t\r\n\t\tif(config.relative && config.parentContext && config.parentContext.route)\r\n\t\t\tcontext.route = config.parentContext.route + '/' + context.route;\r\n\r\n\t\treturn context;\r\n\t},\r\n\tgetRoutesConfig(){\r\n\t\tlet config = _.extend({ \r\n\t\t\trelative: this.getOption('relativeRoutes', {args: [this]}),\r\n\t\t\tparent: this.parent,\r\n\t\t\tparentContext: this.parent && _.isFunction(this.parent.getMainRouteContext) && this.parent.getMainRouteContext()\r\n\t\t}, this.getOption('routesConfig', {args: [this]}));\r\n\t\t\r\n\t\treturn config;\r\n\t},\r\n\tgetRoutesContexts(opts = {}){\r\n\t\tlet { clone, reverse } = opts;\r\n\t\tlet result = this.routesContext || [];\r\n\t\tif (clone || reverse) result = [].slice.call(result);\r\n\t\tif (reverse) result.reverse();\r\n\t\treturn result;\r\n\t},\r\n\r\n\tgetMainRouteContext(){\r\n\r\n\t\tif(this.mainRouteContext) return this.mainRouteContext;\r\n\t\tthis.mainRouteContext = _(this.getRoutesContexts())\r\n\t\t\t.chain()\r\n\t\t\t.sortBy((a,b) => comparator([ [b,a, c => c.main], [a,b, c => c.order] ]))\r\n\t\t\t.take(1)\r\n\t\t\t.value()[0];\r\n\r\n\t\treturn this.mainRouteContext;\r\n\t}\r\n};\r\n","import _ from 'underscore';\r\nimport { MnObject } from 'bbmn-core';\r\nimport { mix, getOption } from 'bbmn-utils';\r\nimport { startableMixin }  from 'bbmn-components';\r\n\r\nimport { childrenableMixin } from 'bbmn-mixins';\r\nimport RoutesMixin from './routes-mixin.js';\r\n\r\n\r\n\r\n\r\nconst BasePage = mix(MnObject).with(childrenableMixin, startableMixin, RoutesMixin);\r\n\r\nexport default BasePage.extend({\r\n\tconstructor(opts = {}){\r\n\t\tBasePage.apply(this, arguments);\r\n\r\n\t\t//root and parent is childrenable options\r\n\t\tthis.mergeOptions(opts, ['app','router','canNotStart','onStart','onBeginStart', 'onBeforeStart', 'onEndStart', 'onStop', 'onBeginStop', 'onBeforeStop', 'onEndStop']);\r\n\r\n\t\t// resides in routes-mixin\r\n\t\tthis.initializeRoutes();\r\n\r\n\t\t// resides in ChildrenableMixin\r\n\t\tthis.initializeChildren();\r\n\t\t\r\n\t\t// resides in routes-mixin\r\n\t\tthis.registerAllRoutes();\r\n\r\n\t\tthis.initializeEvents();\r\n\t},\r\n\tgetOption(...args){\r\n\t\treturn getOption(this, ...args);\r\n\t},\r\n\tgetLabel(){\r\n\t\tlet result = this.getOption('label', { args: [this, this.model]});\r\n\t\treturn result;\r\n\t},\r\n\tgetMenuLabel(){\r\n\t\tlet result = this.getOption('menuLabel', { args: [this, this.model], default: this.getLabel()});\r\n\t\treturn result;\r\n\t},\r\n\r\n\tbuildChildOptions(options){\r\n\t\tlet root = this.getRoot();\r\n\t\tlet defs = {\r\n\t\t\troot,\r\n\t\t\tparent: this.parent,\r\n\t\t\trouter: this.router,\r\n\t\t\tapp: this.app,\r\n\t\t};\r\n\t\tlet result = _.extend(defs, options);\r\n\t\treturn result;\r\n\t},\r\n\r\n\tgetSiblings(opts = {}){\r\n\r\n\t\tlet parent = this.getParent();\r\n\t\tlet options = _.extend({ exclude: [this] }, opts);\r\n\t\treturn parent && parent.getChildren(options) || [];\r\n\r\n\t},\r\n\r\n\tgetHashes(){\r\n\t\tlet parent = this.getParent();\r\n\t\tlet root = this.getRoot();\r\n\r\n\t\treturn {\r\n\t\t\tpath: this.getPathHash(),\r\n\t\t\tthis: this.getHash(),\r\n\t\t\troot: root && root.getHash && root.getHash() || undefined,\r\n\t\t\tparent: parent && parent.getHash && parent.getHash() || undefined,\r\n\t\t\tchildren: this.getChildrenHashes(),\r\n\t\t\tsiblings: this.getSiblingsHashes()\r\n\t\t};\r\n\t},\r\n\tgetPathHash(){\r\n\t\tlet self = this.getHash();\r\n\t\tlet path = [self];\r\n\t\tlet parent = this.getParent();\r\n\t\tif (parent && _.isFunction(parent.getPathHash)) {\r\n\t\t\tpath.unshift(...parent.getPathHash());\r\n\t\t}\r\n\t\treturn path;\r\n\t},\r\n\tgetChildrenHashes(){\r\n\t\treturn this.getChildren({ map: i => i.getHash(), visible: true, });\r\n\t},\r\n\tgetSiblingsHashes(){\r\n\t\treturn this.getSiblings({ map: i => i.getHash(), visible: true, });\r\n\t},\r\n\r\n\tgetRoot(){\r\n\t\tif (this.root === true) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn this.root;\r\n\t\t}\r\n\t},\r\n\tgetAllPages(opts = {}){\r\n\t\t\r\n\t\tlet options = _.extend({}, opts, { includeSelf: true });\r\n\t\tdelete options.map;\r\n\t\tlet pages = this.getRoot().getAllChildren(options);\r\n\r\n\t\tif (_.isFunction(opts.map)) {\r\n\t\t\treturn _(pages).chain().map(opts.map).filter(f => !!f).value();\r\n\t\t} else {\r\n\t\t\treturn pages;\r\n\t\t}\r\n\t},\r\n\r\n\tgetAllHashes(opts = {}){\r\n\t\tlet options = _.extend({ map: i => i.getHash(), visible: true, }, opts);\r\n\t\treturn this.getAllPages(options);\r\n\t},\r\n\r\n\tgetHash(){\r\n\t\tlet context = this.getMainRouteContext();\r\n\r\n\t\tif(!_.isObject(context))\r\n\t\t\treturn;\r\n\r\n\t\tlet parent = this.getParent();\r\n\t\tlet parentCid = parent && parent.cid || undefined;\t\t\r\n\t\treturn {\r\n\t\t\tcid: this.cid,\r\n\t\t\tparentCid,\r\n\t\t\turl: context.route,\r\n\t\t\tlabel: this.getMenuLabel(),\r\n\t\t\torder: this.order,\r\n\t\t};\r\n\t},\r\n\r\n\r\n\t_childFilter(item, index, opts = {}) {\r\n\t\tlet base = BasePage.prototype._childFilter;\r\n\t\tif(base && !base.apply(this, arguments))\r\n\t\t\treturn;\r\n\r\n\t\tlet { visible } = opts;\r\n\r\n\t\tif(visible && (item.visible === false || item.hidden === true))\r\n\t\t\treturn;\r\n\r\n\t\treturn item;\r\n\t},\r\n\tinitializeEvents(){\r\n\t\tif (this._triggerOnParentInitiallized) return;\r\n\r\n\t\tlet triggersOn = [];\r\n\t\tif(this.app){\r\n\t\t\ttriggersOn.push(this.app);\r\n\t\t}\r\n\t\tif(this.router){\r\n\t\t\ttriggersOn.push(this.router);\r\n\t\t}\r\n\t\tlet events = ['start', 'stop'];\r\n\t\t_.each(events, event => {\r\n\t\t\tthis.on(event, (...args) => {\r\n\t\t\t\t_.each(triggersOn, parent => {\r\n\t\t\t\t\tparent.triggerMethod('page:' + event, this, ...args);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis._triggerOnParentInitiallized = true;\r\n\t}\r\n});\r\n\r\n","import _ from 'underscore';\r\nimport { App } from 'bbmn-components';\r\nimport { historyApi, historyWatcher } from '../history/index.js';\r\nimport PageRouter from './page-router.js';\r\nimport Page from './page';\r\nimport { buildByKey } from 'bbmn-utils';\r\nimport { isClass } from 'bbmn-core';\r\n\r\nexport default App.extend({\r\n\thistoryWatcher: false,\r\n\tRouter: PageRouter,\r\n\r\n\tconstructor(){\r\n\t\t\r\n\t\tthis._pages = [];\r\n\t\tApp.apply(this, arguments);\r\n\t\tthis._initPageListeners();\r\n\t},\r\n\t_initPageListeners(){\r\n\t\tthis.on('start', this._buildPages);\r\n\t\tthis.on('pages:ready', this._startHistory);\r\n\t\tthis.on('page:start', this._onPageStart);\r\n\t\tthis.on('page:stop', this._onPageStop);\r\n\t},\r\n\t_startHistoryWatcher(){\r\n\t\tif(this.getOption('historyWatcher')) return;\r\n\t\thistoryWatcher.watch();\r\n\t},\r\n\t_startHistory(){\r\n\t\tif (historyApi.isStarted()) return;\r\n\r\n\t\tthis._startHistoryWatcher();\r\n\r\n\t\tlet options = this.getOption('startHistory');\r\n\t\tif(!options) { return; }\r\n\t\tif (options === true) {\r\n\t\t\toptions = { pushState: false };\r\n\t\t} else if (!_.isObject(options)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tthis.triggerMethod('before:history:start', result);\r\n\r\n\t\tvar result = historyApi.start(options);\r\n\r\n\t\tthis.triggerMethod('history:start', result);\r\n\t},\r\n\t_buildPages(){\r\n\t\tthis.triggerMethod('before:pages:ready');\r\n\t\tthis.buildPages();\r\n\t\tthis.triggerMethod('pages:ready');\r\n\t},\r\n\tbuildPages() {\r\n\t\t\r\n\t\tif (this.rootPage instanceof Page) return;\r\n\r\n\t\tthis.triggerMethod('before:router:create');\r\n\t\tthis.router = this.buildRouter();\r\n\t\tthis.triggerMethod('router:create', this.router);\r\n\r\n\t\tvar RootPage = this.getOption('RootPage');\r\n\t\tif (isClass(RootPage, Page)) {\r\n\t\t\tthis.rootPage = new RootPage({ router: this.router, shouldRegisterAllRoutes: true, app: this });\r\n\t\t}\r\n\r\n\t},\t\r\n\tbuildRouter(){\r\n\t\tif (this.router instanceof PageRouter) return this.router;\r\n\t\treturn buildByKey(this, 'Router', { ctor: PageRouter });\r\n\t},\r\n\t_onPageStart(...args){\r\n\t\tthis.showPage(...args);\r\n\t},\r\n\tshowPage: _.noop,\r\n\t_onPageStop(...args){\r\n\t\tthis.showPage(...args);\r\n\t},\r\n\thidePage: _.noop,\r\n});\r\n"],"names":["get","router","opts","key","update","value","result","context","args","getOption","routeArgumentsToObject","route","name","callback","_","isObject","extend","isFunction","uniqueId","isRouterHoldsActions","rawRoute","isRegExp","_routeToRegExp","callbackWrapper","bind","_processCallback","createActionContext","routeContext","fragment","options","rawArgs","_extractParameters","slice","queryString","pop","qs","prepareActionQueryString","prepareActionArguments","routeType","isString","queryStringParser","params","match","res","each","index","substring","isArray","push","concat","toPromise","arg","resolve","Promise","then","Error","reject","getCallbackFunction","executeResult","exception","promise","processCallback","actionContext","asPromise","triggerEvent","shouldTriggerEvent","execute","lastAttempt","error","handleError","handlers","_getHandleContext","some","applyHandler","handler","getHandler","apply","hash","nullable","items","setHandler","reduce","memo","item","getHandleContext","custom","unshift","$","Deferred","constructor","undefined","Router","BbRouter","arguments","call","routes","getInitRoutes","size","addRoutes","controller","approutes","map","_buildRouteContext","registerRouteContext","_storeCreatedContext","isRouteChaining","normalized","chain","_normalizeRoutes","filter","f","doNotReverse","reverse","registered","addRoute","massAdd","c","clone","has","buildRouteContextFromArguments","buildRouteContext","routeContexts","restart","action","handle","event","trigger","paramStringToObject","optionalParam","namedParam","splatParam","escapeRegExp","replace","optional","flags","RegExp","find","cntx","test","historyApi","navigate","loadUrl","history","matchRoot","getFragment","executed","executeHandler","customTest","testHandler","resultContext","findHandler","start","started","entries","listenTo","onRoute","onBackRoute","length","isActionContext","lastElement","gobackContext","lookFor","indexOf","last","hasElements","Events","BaseRouter","page","contexts","getRoutesContexts","startPage","process","Process","errors","shift","beforePageStart","afterPageStart","previousPage","isStarted","stop","initializeRouter","_buildRoutesContexts","_createRouter","_shouldRegisterAllRoutes","PageRouter","pages","getAllChildren","includeSelf","force","registerPageRoutes","config","getRoutesConfig","_normalizeRoutesContextRoute","routesContext","isNumber","order","relative","parentContext","parent","getMainRouteContext","mainRouteContext","sortBy","a","b","comparator","main","take","BasePage","mix","MnObject","with","childrenableMixin","startableMixin","RoutesMixin","mergeOptions","initializeRoutes","initializeChildren","registerAllRoutes","initializeEvents","model","default","getLabel","root","getRoot","defs","app","getParent","exclude","getChildren","getPathHash","getHash","getChildrenHashes","getSiblingsHashes","self","path","i","visible","getSiblings","getAllPages","parentCid","cid","getMenuLabel","base","prototype","_childFilter","hidden","_triggerOnParentInitiallized","triggersOn","events","on","triggerMethod","App","_pages","_initPageListeners","_buildPages","_startHistory","_onPageStart","_onPageStop","watch","_startHistoryWatcher","pushState","buildPages","rootPage","Page","buildRouter","RootPage","isClass","shouldRegisterAllRoutes","buildByKey","ctor","showPage","noop"],"mappings":"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"}